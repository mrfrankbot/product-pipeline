import{r as h,j as e}from"./vendor-react-DzgxJkbp.js";import{n as B}from"./index-DJAOEm-v.js";import{P as O,a as d,C as y,I as o,b as x,c as p,j as v,T as t,E as T,J as k,a0 as N,D as _,B as w,x as A,o as D,H as n,e as P,Q as M}from"./vendor-polaris-o1SQP_xq.js";import"./vendor-query-BeqrpgNA.js";const F=[{label:"All statuses",value:""},{label:"Synced",value:"synced"},{label:"Fulfilled",value:"fulfilled"}],L=a=>a==null?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),U=a=>{if(!a)return"—";const r=new Date(a);return Number.isNaN(r.getTime())?"—":r.toLocaleString()},V=()=>{const[a,r]=h.useState(""),[c,f]=h.useState(""),[l,i]=h.useState(0),{data:j,isLoading:b,error:m}=B({limit:25,offset:l,search:a||void 0,status:c||void 0}),u=h.useMemo(()=>j?.data??[],[j]),S=j?.total??0,C=l>0,I=l+25<S;return e.jsx(O,{title:"Orders",subtitle:"Imported orders from eBay",fullWidth:!0,children:e.jsxs(d,{gap:"500",children:[e.jsx(y,{children:e.jsx(o,{align:"space-between",blockAlign:"center",children:e.jsxs(o,{gap:"300",blockAlign:"center",children:[e.jsx(x,{background:"bg-fill-secondary",borderRadius:"200",padding:"200",children:e.jsx(p,{source:v})}),e.jsxs(d,{gap:"050",children:[e.jsx(t,{variant:"headingSm",as:"h2",children:"Order Management"}),e.jsxs(t,{variant:"bodySm",tone:"subdued",as:"p",children:[S," total orders"]})]})]})})}),e.jsx(y,{children:e.jsxs(d,{gap:"300",children:[e.jsxs(o,{gap:"300",align:"space-between",children:[e.jsx(T,{label:"",value:a,onChange:s=>{r(s),i(0)},placeholder:"Search by eBay order ID or Shopify order ID",prefix:e.jsx(p,{source:k}),autoComplete:"off",clearButton:!0,onClearButtonClick:()=>r("")}),e.jsx(x,{minWidth:"200px",children:e.jsx(N,{label:"Status",labelHidden:!0,options:F,value:c,onChange:s=>{f(s),i(0)}})})]}),e.jsx(_,{}),m&&e.jsx(w,{tone:"critical",title:"Unable to load orders",children:e.jsx(t,{as:"p",children:m.message})}),b?e.jsx(x,{padding:"400",children:e.jsx(o,{align:"center",children:e.jsx(A,{accessibilityLabel:"Loading orders",size:"large"})})}):u.length===0?e.jsx(x,{padding:"400",children:e.jsxs(d,{gap:"300",inlineAlign:"center",children:[e.jsx(p,{source:v,tone:"subdued"}),e.jsxs(d,{gap:"200",inlineAlign:"center",children:[e.jsx(t,{variant:"headingSm",as:"h3",children:"No orders found"}),e.jsx(t,{tone:"subdued",as:"p",children:a||c?"Try adjusting your search or filters":"Orders will appear here once imported from eBay"})]}),a||c?e.jsx(D,{onClick:()=>{r(""),f(""),i(0)},children:"Clear filters"}):null]})}):e.jsx(n,{resourceName:{singular:"order",plural:"orders"},itemCount:u.length,selectable:!1,headings:[{title:"eBay order"},{title:"Shopify order"},{title:"Status"},{title:"Total"},{title:"Date"}],children:u.map((s,g)=>e.jsxs(n.Row,{id:String(s.id??g),position:g,children:[e.jsx(n.Cell,{children:e.jsx(t,{variant:"bodyMd",fontWeight:"semibold",as:"span",children:s.ebay_order_id??s.ebayOrderId??"—"})}),e.jsx(n.Cell,{children:e.jsx(t,{variant:"bodyMd",as:"span",children:s.shopify_order_id??s.shopifyOrderId??"—"})}),e.jsx(n.Cell,{children:e.jsx(P,{tone:s.status==="fulfilled"?"success":s.status==="synced"?"info":s.status==="failed"?"critical":"info",children:s.status??"unknown"})}),e.jsx(n.Cell,{children:e.jsx(t,{variant:"bodyMd",as:"span",children:L(s.total)})}),e.jsx(n.Cell,{children:e.jsx(t,{variant:"bodySm",tone:"subdued",as:"span",children:U(s.ebay_created_at??s.created_at??s.createdAt)})})]},s.id??g))})]})}),!b&&u.length>0&&e.jsx(o,{align:"center",children:e.jsx(M,{hasPrevious:C,onPrevious:()=>i(Math.max(0,l-25)),hasNext:I,onNext:()=>i(l+25)})})]})})};export{V as default};
