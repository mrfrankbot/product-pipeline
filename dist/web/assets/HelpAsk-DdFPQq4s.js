import{u as A,r as n,j as e}from"./vendor-react-DzgxJkbp.js";import{a as w,b as I}from"./vendor-query-BeqrpgNA.js";import{f as Q}from"./index-DJAOEm-v.js";import{P as m,C as j,a as u,b as v,c as y,ac as q,T as a,I as p,o as d,B as C,t as P,D as B,al as c,a0 as G}from"./vendor-polaris-o1SQP_xq.js";const H=[{label:"Select a category…",value:""},{label:"Getting Started",value:"Getting Started"},{label:"Products",value:"Products"},{label:"Mappings",value:"Mappings"},{label:"Pipeline",value:"Pipeline"},{label:"Orders",value:"Orders"},{label:"Analytics",value:"Analytics"},{label:"Chat",value:"Chat"},{label:"General",value:"General"}],E=()=>{const r=A(),S=w(),[t,h]=n.useState(""),[l,x]=n.useState(""),[o,b]=n.useState(""),[f,g]=n.useState(!1),i=I({mutationFn:s=>Q.post("/help/questions",s),onSuccess:()=>{g(!0),S.invalidateQueries({queryKey:["help-articles-all"]})}}),k=n.useCallback(()=>{t.trim()&&i.mutate({question:t.trim(),...o.trim()?{asked_by:o.trim()}:{},...l?{category:l}:{}})},[t,o,l,i]);return f?e.jsx(m,{title:"Ask a Question",backAction:{content:"Help Center",onAction:()=>r("/help")},children:e.jsx(j,{children:e.jsxs(u,{gap:"400",inlineAlign:"center",children:[e.jsx(v,{background:"bg-fill-success-secondary",borderRadius:"full",padding:"300",children:e.jsx(y,{source:q,tone:"success"})}),e.jsx(a,{variant:"headingLg",as:"h2",children:"Question Submitted!"}),e.jsx(a,{as:"p",tone:"subdued",children:"Your question has been received. If our AI can answer it, you'll see it in the documentation shortly. Otherwise, an admin will review and respond."}),e.jsxs(p,{gap:"300",children:[e.jsx(d,{onClick:()=>r("/help"),children:"Back to Help Center"}),e.jsx(d,{variant:"primary",onClick:()=>{g(!1),h(""),x(""),b("")},children:"Ask Another Question"})]})]})})}):e.jsx(m,{title:"Ask a Question",subtitle:"Can't find what you're looking for? Submit a question.",backAction:{content:"Help Center",onAction:()=>r("/help")},children:e.jsxs(u,{gap:"400",children:[e.jsx(C,{tone:"info",title:"AI-powered answers",children:e.jsx(a,{as:"p",children:"Submit your question and our AI will try to answer it instantly. Questions may also be reviewed by an admin and added to the documentation."})}),e.jsx(j,{children:e.jsxs(u,{gap:"400",children:[e.jsxs(p,{gap:"300",blockAlign:"center",children:[e.jsx(v,{background:"bg-fill-secondary",borderRadius:"200",padding:"200",children:e.jsx(y,{source:P})}),e.jsx(a,{variant:"headingMd",as:"h2",children:"Your question"})]}),e.jsx(B,{}),e.jsxs(c,{children:[e.jsx(c.Group,{children:e.jsxs("div",{children:[e.jsxs(a,{variant:"bodySm",fontWeight:"semibold",as:"p",children:["Question ",e.jsx("span",{style:{color:"var(--p-color-text-critical)"},children:"*"})]}),e.jsx("textarea",{value:t,onChange:s=>h(s.target.value),placeholder:"How do I…?",rows:4,style:{width:"100%",padding:"8px 12px",marginTop:4,border:"1px solid var(--p-color-border)",borderRadius:"var(--p-border-radius-200)",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical",lineHeight:1.5}})]})}),e.jsx(c.Group,{children:e.jsx(G,{label:"Category",options:H,value:l,onChange:x})}),e.jsx(c.Group,{children:e.jsxs("div",{children:[e.jsx(a,{variant:"bodySm",fontWeight:"semibold",as:"p",children:"Your name (optional)"}),e.jsx("input",{type:"text",value:o,onChange:s=>b(s.target.value),placeholder:"e.g. Jane",style:{width:"100%",padding:"8px 12px",marginTop:4,border:"1px solid var(--p-color-border)",borderRadius:"var(--p-border-radius-200)",fontSize:"0.875rem",fontFamily:"inherit"}})]})})]}),i.isError&&e.jsx(C,{tone:"critical",title:"Submission failed",children:e.jsx(a,{as:"p",children:i.error?.message??"Please try again."})}),e.jsxs(p,{gap:"300",children:[e.jsx(d,{variant:"primary",onClick:k,loading:i.isPending,disabled:!t.trim(),children:"Submit Question"}),e.jsx(d,{onClick:()=>r("/help"),children:"Cancel"})]})]})})]})})};export{E as default};
