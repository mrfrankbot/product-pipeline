import{h as L,u as w,k as B,r as x,j as e}from"./vendor-react-DzgxJkbp.js";import{categorySlug as M}from"./HelpCenter-P2vboSOy.js";import{C as f,b,I as g,x as N,ag as T,T as h,o,a as p,c as v,ah as S,e as D,D as C,ai as H,aj as R,ak as $,a9 as E}from"./vendor-polaris-o1SQP_xq.js";import"./vendor-query-BeqrpgNA.js";import"./index-DJAOEm-v.js";function F(l){return l?l.split(/\n\n+/).map((d,s)=>{const a=d.trim();if(!a)return null;const u=a.split(`
`),k=u.every(n=>/^\d+\.\s/.test(n.trim())||n.trim()===""),t=u.every(n=>/^[-•]\s/.test(n.trim())||n.trim()==="");return k?e.jsx("ol",{style:{paddingLeft:20,margin:"8px 0"},children:u.filter(n=>n.trim()).map((n,c)=>e.jsx("li",{style:{marginBottom:4},children:A(n.replace(/^\d+\.\s*/,""))},c))},s):t?e.jsx("ul",{style:{paddingLeft:20,margin:"8px 0"},children:u.filter(n=>n.trim()).map((n,c)=>e.jsx("li",{style:{marginBottom:4},children:A(n.replace(/^[-•]\s*/,""))},c))},s):e.jsx("p",{style:{margin:"8px 0",lineHeight:1.6},children:A(a)},s)}):null}function A(l){const i=[],d=/\*\*(.+?)\*\*/g;let s=0,a;for(;(a=d.exec(l))!==null;)a.index>s&&i.push(l.slice(s,a.index)),i.push(e.jsx("strong",{children:a[1]},a.index)),s=d.lastIndex;return s<l.length&&i.push(l.slice(s)),i.length===1?i[0]:e.jsx(e.Fragment,{children:i})}const O=()=>{const{id:l}=L(),i=w(),d=B(),s=d?.articles||[],a=d?.categories||[],[u,k]=x.useState(null),t=x.useMemo(()=>s.find(r=>r.id===Number(l)),[s,l]),n=x.useMemo(()=>a.flatMap(r=>r.items),[a]),c=x.useMemo(()=>n.findIndex(r=>r.id===Number(l)),[n,l]),j=c>0?n[c-1]:null,m=c>=0&&c<n.length-1?n[c+1]:null,I=x.useMemo(()=>t?s.filter(r=>r.category===t.category&&r.id!==t.id).slice(0,4):[],[t,s]),q=x.useCallback(r=>{k(r)},[]);if(!s.length)return e.jsx(f,{children:e.jsx(b,{padding:"600",children:e.jsx(g,{align:"center",children:e.jsx(N,{size:"large",accessibilityLabel:"Loading article"})})})});if(!t)return e.jsx(f,{children:e.jsxs(T,{heading:"Article not found",image:"",children:[e.jsx(h,{as:"p",children:"This article may have been removed or the link is incorrect."}),e.jsx(o,{onClick:()=>i("/help"),children:"Back to Help Center"})]})});const y=t.category||"General";return e.jsxs(p,{gap:"400",children:[e.jsxs(g,{gap:"200",blockAlign:"center",children:[e.jsx(o,{variant:"plain",onClick:()=>i("/help"),children:"Help"}),e.jsx(v,{source:S,tone:"subdued"}),e.jsx(o,{variant:"plain",onClick:()=>i(`/help/category/${M(y)}`),children:y}),e.jsx(v,{source:S,tone:"subdued"}),e.jsx(h,{variant:"bodySm",tone:"subdued",as:"span",children:t.question.length>40?t.question.slice(0,40)+"…":t.question})]}),e.jsx(f,{children:e.jsxs(p,{gap:"400",children:[e.jsxs(p,{gap:"200",children:[e.jsx(g,{gap:"200",blockAlign:"center",children:e.jsx(D,{children:y})}),e.jsx(h,{variant:"headingLg",as:"h1",children:t.question}),e.jsxs(h,{variant:"bodySm",tone:"subdued",as:"p",children:["Last updated"," ",new Date(t.updated_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),e.jsx(C,{}),e.jsx(b,{children:e.jsx("div",{style:{lineHeight:1.7,color:"var(--p-color-text)"},children:F(t.answer||"")})}),e.jsx(C,{}),e.jsx(b,{background:"bg-fill-secondary",borderRadius:"200",padding:"400",children:e.jsxs(p,{gap:"200",inlineAlign:"center",children:[e.jsx(h,{variant:"bodySm",fontWeight:"semibold",as:"p",children:"Was this article helpful?"}),u?e.jsx(h,{variant:"bodySm",tone:"success",as:"p",children:"Thanks for your feedback!"}):e.jsxs(g,{gap:"300",children:[e.jsx(o,{icon:H,onClick:()=>q("yes"),children:"Yes, helpful"}),e.jsx(o,{icon:R,onClick:()=>q("no"),children:"Not really"})]})]})})]})}),I.length>0&&e.jsx(f,{children:e.jsxs(p,{gap:"300",children:[e.jsx(h,{variant:"headingMd",as:"h3",children:"Related articles"}),e.jsx(C,{}),e.jsx(p,{gap:"200",children:I.map(r=>e.jsxs(g,{align:"space-between",blockAlign:"center",children:[e.jsx(o,{variant:"plain",onClick:()=>i(`/help/article/${r.id}`),children:r.question}),e.jsx(v,{source:S,tone:"subdued"})]},r.id))})]})}),e.jsxs(g,{align:"space-between",children:[j?e.jsx(o,{icon:$,onClick:()=>i(`/help/article/${j.id}`),children:j.question.length>35?j.question.slice(0,35)+"…":j.question}):e.jsx(b,{}),m?e.jsx(o,{icon:E,onClick:()=>i(`/help/article/${m.id}`),children:m.question.length>35?m.question.slice(0,35)+"…":m.question}):e.jsx(b,{})]})]})};export{O as default};
